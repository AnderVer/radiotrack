# üìª RadioTrack ‚Äî –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ (9 —Å—Ç–∞–Ω—Ü–∏–π)

**–î–∞—Ç–∞:** 19 —Ñ–µ–≤—Ä–∞–ª—è 2026
**–°—Ç–∞—Ç—É—Å:** Europa Plus —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

---

## üéØ –¶–µ–ª—å

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å 9 —Å—Ç–∞–Ω—Ü–∏–π MVP –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–∞–ª–∏—á–∏—è –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤ –∏ –æ—Ü–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞.

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| ‚Ññ | –°—Ç–∞–Ω—Ü–∏—è | URL –ø–ª–µ–π–ª–∏—Å—Ç–∞ | –§–æ—Ä–º–∞—Ç | JS –Ω—É–∂–µ–Ω? | –ê–Ω—Ç–∏–±–æ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|---|---------|---------------|--------|-----------|---------|-----------|--------|
| 1 | **–ê–≤—Ç–æ—Ä–∞–¥–∏–æ** | `/playlist` | HTML | ‚ùå | ‚ùå | **Easy** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| 2 | **–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å** | `/api/playlist` | JSON/API | ‚ùå | ‚ùå | **Medium** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| 3 | **DFM** | –ù/–î | ‚Äî | ‚Äî | ‚Äî | **Hard** | ‚ùå –ù–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞ |
| 4 | **Love Radio** | –ù/–î | ‚Äî | ‚Äî | ‚Äî | **Hard** | ‚ùå –ù–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞ |
| 5 | **–†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ** | `/playlist` | –ü—Ä–æ–º–æ | ‚ùå | ‚ùå | **Hard** | ‚ùå –¢–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–∏ |
| 6 | **Energy** | TBD | TBD | TBD | TBD | **TBD** | üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ |
| 7 | **–•–∏—Ç FM** | TBD | TBD | TBD | TBD | **TBD** | üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ |
| 8 | **–ù–ê–®–ï –†–∞–¥–∏–æ** | TBD | TBD | TBD | TBD | **TBD** | üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ |
| 9 | **–†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥** | TBD | TBD | TBD | TBD | **TBD** | üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ |
| 10 | **–Æ–º–æ—Ä FM** | TBD | TBD | TBD | TBD | **TBD** | üîç –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ |

---

## üìù –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### 1. –ê–≤—Ç–æ—Ä–∞–¥–∏–æ ‚úÖ

**URL:** `https://www.avtoradio.ru/playlist`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (AvtoradioPlaylistParser)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```html
<ul class="what-list mb20">
  <li class="fl pr">
    <span class="time fl">11:38</span>
    <div class="what-name fl">
      <b>Artist</b><br>
      Title
    </div>
  </li>
</ul>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML (SSR)
- –î–∞—Ç–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: "–ß—Ç–æ –∑–∞ –ø–µ—Å–Ω—è –∑–≤—É—á–∞–ª–∞ 18 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≤ 11:38?"
- –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: `HH:MM`
- –§–æ—Ä–º–∞—Ç –¥–∞—Ç—ã: `–î–î –º–µ—Å—è—Ü –ì–û–î–î`
- Timezone: –ú–°–ö

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Easy ‚úÖ

---

### 2. –ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å ‚úÖ

**URL:** `https://europaplus.ru/api/playlist`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (EuropaPlusPlaylistParser)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```json
{
  "tracks": [
    {
      "artist": "Artist Name",
      "title": "Track Title",
      "played_at": "2026-02-19T15:30:00Z",
      "duration": 180
    }
  ]
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- JSON API (–Ω–µ HTML)
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –±–µ–∑ JavaScript
- –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: ISO 8601 (UTC)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unix timestamp
- –†–∞–∑–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON (tracks/items/data)

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium ‚úÖ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- `EuropaPlusPlaylistParser` ‚Äî –ø–∞—Ä—Å–µ—Ä JSON API
- `EuropaPlusIngestJob` ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ timestamp
- Fallback –Ω–∞ HTML –ø–∞—Ä—Å–∏–Ω–≥

---

### 3. DFM ‚ùå

**URL:** `https://dfm.ru/playlist` ‚Üí **404 Not Found**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/music`, `/tracks`)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AudD fallback

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Hard (–Ω–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞)

---

### 4. Love Radio ‚ùå

**URL:** `https://loveradio.ru/playlist` ‚Üí **404 Not Found**

**–°—Ç–∞—Ç—É—Å:** ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ URL
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AudD fallback

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Hard (–Ω–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞)

---

### 5. –†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ ‚ùå

**URL:** `https://rusradio.ru/playlist`

**–°—Ç–∞—Ç—É—Å:** ‚ùå –¢–æ–ª—å–∫–æ –ø—Ä–æ–º–æ-–±–ª–æ–∫ "–ù–æ–≤–∏–Ω–∫–∏"

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
–ù–æ–≤–∏–Ω–∫–∏:
‚îú‚îÄ‚îÄ –í–æ–∑—å–º–∏ –º–æ—é –ª—é–±–æ–≤—å ‚Äî –í–∞–ª–µ—Ä–∏—è
‚îú‚îÄ‚îÄ –î–∞–≤–Ω–æ –≤—Å—ë —Ö–æ—Ä–æ—à–æ ‚Äî –§–∏–ª–∏–ø–ø –ö–∏—Ä–∫–æ—Ä–æ–≤
‚îî‚îÄ‚îÄ ...
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ù–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
- –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —ç—Ñ–∏—Ä–∞
- –¢–æ–ª—å–∫–æ –ø—Ä–æ–º–æ-—Ç—Ä–µ–∫–∏

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Hard (–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è MVP)

---

### 6‚Äì10. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω—Ü–∏–∏ üîç

**–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑:**
- Energy (`https://www.energyfm.ru/`)
- –•–∏—Ç FM (`https://hitfm.ru/`)
- –ù–ê–®–ï –†–∞–¥–∏–æ (`https://nashe.ru/`)
- –†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥ (`https://radiorecord.ru/`)
- –Æ–º–æ—Ä FM (`https://yumorfm.ru/`)

**–ü–ª–∞–Ω:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ `/playlist` endpoint
2. –ê–Ω–∞–ª–∏–∑ HTML/API
3. –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

---

## üéØ –í—ã–≤–æ–¥—ã

### –ì–æ—Ç–æ–≤—ã–µ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é (Easy/Medium)

| –°—Ç–∞–Ω—Ü–∏—è | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ |
|---------|-----------|---------------|
| **–ê–≤—Ç–æ—Ä–∞–¥–∏–æ** | ‚úÖ Easy | –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **–ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å** | üî∂ Medium | –ù–∞–π—Ç–∏ API endpoint |

### –¢—Ä–µ–±—É—é—Ç –∞–Ω–∞–ª–∏–∑–∞ (TBD)

| –°—Ç–∞–Ω—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|--------|
| Energy | üîç –ê–Ω–∞–ª–∏–∑ |
| –•–∏—Ç FM | üîç –ê–Ω–∞–ª–∏–∑ |
| –ù–ê–®–ï –†–∞–¥–∏–æ | üîç –ê–Ω–∞–ª–∏–∑ |
| –†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥ | üîç –ê–Ω–∞–ª–∏–∑ |
| –Æ–º–æ—Ä FM | üîç –ê–Ω–∞–ª–∏–∑ |

### –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (Hard)

| –°—Ç–∞–Ω—Ü–∏—è | –ü—Ä–∏—á–∏–Ω–∞ |
|---------|---------|
| DFM | 404 Not Found |
| Love Radio | 404 Not Found |
| –†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ | –¢–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–∏ (–Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏) |

---

## üìã –ü–ª–∞–Ω —Ä–∞–±–æ—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Europa Plus ‚úÖ

- [x] –ê–Ω–∞–ª–∏–∑ DevTools ‚Üí Network
- [x] –ù–∞–π—Ç–∏ JSON endpoint (`/api/playlist`)
- [x] –°–æ–∑–¥–∞—Ç—å `EuropaPlusPlaylistParser`
- [x] –î–æ–±–∞–≤–∏—Ç—å job `EuropaPlusIngestJob`
- [x] –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 5 —Å—Ç–∞–Ω—Ü–∏–π

1. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URLs –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
2. [ ] –ê–Ω–∞–ª–∏–∑ DevTools ‚Üí Network
3. [ ] –û—Ü–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å
4. [ ] –í—ã–±—Ä–∞—Ç—å 1-2 "easy" —Å—Ç–∞–Ω—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: FallbackÁ≠ñÁï•

–î–ª—è —Å—Ç–∞–Ω—Ü–∏–π –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AudD/ACRCloud (–ø–ª–∞—Ç–Ω–æ)
- –ò–ª–∏ –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ MVP

---

## üîß –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–∞—Ä—Å–µ—Ä–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```ruby
# app/services/base_playlist_parser.rb
class BasePlaylistParser
  def fetch_and_parse
    raise NotImplementedError
  end

  def parse(html:)
    raise NotImplementedError
  end
end
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```ruby
class AvtoradioPlaylistParser < BasePlaylistParser
  # ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
end

class EuropaPlusPlaylistParser < BasePlaylistParser
  # üîç –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
end
```

### Factory

```ruby
# app/services/playlist_parser_factory.rb
class PlaylistParserFactory
  def self.for_station(station_code)
    case station_code
    when "avtoradio"
      AvtoradioPlaylistParser.new
    when "europe_plus"
      EuropaPlusPlaylistParser.new
    else
      raise "Parser not available for #{station_code}"
    end
  end
end
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏–∏

- [x] –ê–≤—Ç–æ—Ä–∞–¥–∏–æ ‚Äî –∞–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω, –ø–∞—Ä—Å–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –ï–≤—Ä–æ–ø–∞ –ü–ª—é—Å ‚Äî API –Ω–∞–π–¥–µ–Ω–æ, –ø–∞—Ä—Å–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] DFM ‚Äî 404, –Ω–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞
- [x] Love Radio ‚Äî 404, –Ω–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–∞
- [x] –†—É—Å—Å–∫–æ–µ –†–∞–¥–∏–æ ‚Äî —Ç–æ–ª—å–∫–æ –Ω–æ–≤–∏–Ω–∫–∏
- [ ] Energy ‚Äî TBD
- [ ] –•–∏—Ç FM ‚Äî TBD
- [ ] –ù–ê–®–ï –†–∞–¥–∏–æ ‚Äî TBD
- [ ] –†–∞–¥–∏–æ –†–µ–∫–æ—Ä–¥ ‚Äî TBD
- [ ] –Æ–º–æ—Ä FM ‚Äî TBD

---

**–°—Ç–∞—Ç—É—Å:** 2 –∏–∑ 10 —Å—Ç–∞–Ω—Ü–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, 3 –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, 5 —Ç—Ä–µ–±—É—é—Ç –∞–Ω–∞–ª–∏–∑–∞.
