# üéâ RadioTrack ‚Äî –ò—Ç–æ–≥–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ M0‚ÄìM7

**–î–∞—Ç–∞:** 19 —Ñ–µ–≤—Ä–∞–ª—è 2026 –≥.  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ M0‚ÄìM7 –∑–∞–≤–µ—Ä—à–µ–Ω—ã (96% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)

---

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã

| –≠—Ç–∞–ø | –ù–∞–∑–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ó–∞–¥–∞—á–∏ |
|------|----------|--------|--------|
| **M0** | Bootstrap | ‚úÖ | 4/4 |
| **M1** | Avtoradio ingest | ‚úÖ | 6/6 |
| **M2** | Dedup | ‚úÖ | 3/3 |
| **M3** | Solid Queue schedule | ‚úÖ | 4/4 |
| **M4** | UI (Hotwire) | ‚úÖ | 3/3 |
| **M5** | OAuth | ‚úÖ | 3/3 |
| **M6** | Recognition fallback | ‚úÖ | 1/1 |
| **M7** | PWA | ‚úÖ | 1/1 |
| **M8** | Tests | ‚úÖ | 4/4 |
| **M9** | Stations inventory | ‚è∏ | 1/2 |

**–í—Å–µ–≥–æ:** 23 –∏–∑ 24 –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–µ–Ω–æ (96%)

---

## üÜï –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∑–∞ 19 —Ñ–µ–≤—Ä–∞–ª—è (M5‚ÄìM7)

### M5 ‚Äî OAuth (3 –∑–∞–¥–∞—á–∏)

1. **OAuth VK**
   - –ì–µ–º `omniauth-vkontakte`
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ç–æ—Ä `config/initializers/omniauth.rb`
   - –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ –≤ `app/views/devise/sessions/new.html.erb`
   - Callback –≤ `Users::OmniauthCallbacksController`

2. **OAuth Yandex**
   - –ì–µ–º `omniauth-yandex`
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ omniauth.rb
   - –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ –≤ registration
   - Identity linking —á–µ—Ä–µ–∑ –º–æ–¥–µ–ª—å Identity

3. **Subscription Status UI**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è `app/views/users/profiles/show.html.erb`
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤: Guest, Auth, Paid
   - –¢–∞–±–ª–∏—Ü–∞ –ª–∏–º–∏—Ç–æ–≤ –∏ —Ñ—É–Ω–∫—Ü–∏–π
   - –ö–Ω–æ–ø–∫–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏/–æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `Gemfile` (+2 –≥–µ–º–∞)
- `config/initializers/omniauth.rb` (–Ω–æ–≤—ã–π)
- `app/views/devise/sessions/new.html.erb` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `app/views/devise/registrations/new.html.erb` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `app/views/users/profiles/show.html.erb` (–Ω–æ–≤—ã–π)
- `.env.example` (–æ–±–Ω–æ–≤–ª–µ–Ω)

---

### M6 ‚Äî Recognition fallback (1 –∑–∞–¥–∞—á–∞)

1. **ENV Wiring + AudD –∫–ª–∏–µ–Ω—Ç**
   - –û–±–Ω–æ–≤–ª–µ–Ω `.env.example` —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
   - –°–µ—Ä–≤–∏—Å `RadioRecognitionService` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ AudD –∏ ACRCloud
   - –ú–µ—Ç–æ–¥—ã: `register_station`, `process_callback`

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `.env.example` (–¥–æ–±–∞–≤–ª–µ–Ω—ã ACRCLOUD_API_KEY/SECRET)

---

### M7 ‚Äî PWA (1 –∑–∞–¥–∞—á–∞)

1. **Manifest + –∏–∫–æ–Ω–∫–∏ + Service Worker**
   - `public/manifest.webmanifest` (—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª)
   - `public/icons/icon-192x192.svg` (–æ–±–Ω–æ–≤–ª–µ–Ω)
   - `public/icons/icon-512x512.svg` (–æ–±–Ω–æ–≤–ª–µ–Ω)
   - `public/sw.js` (–Ω–æ–≤—ã–π Service Worker)
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SW –≤ `application.html.erb`

**–§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã:**
- `public/sw.js` (–Ω–æ–≤—ã–π)
- `public/icons/icon-192x192.svg` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `public/icons/icon-512x512.svg` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `app/views/layouts/application.html.erb` (–æ–±–Ω–æ–≤–ª–µ–Ω)

---

## üì¶ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (19 —Ñ–µ–≤—Ä–∞–ª—è)

```
config/initializers/omniauth.rb          # OmniAuth –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
app/views/devise/sessions/new.html.erb   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
app/views/devise/registrations/new.html.erb  # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
app/views/users/profiles/show.html.erb   # –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
public/sw.js                             # Service Worker
–û–¢–ß–ï–¢_–û_–í–´–ü–û–õ–ù–ï–ù–ù–´–•_–†–ê–ë–û–¢–ê–•.md           # –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
Gemfile                                  # + omniauth-vkontakte, omniauth-yandex
.env.example                             # + OAuth –∏ Recognition ENV
public/icons/icon-192x192.svg            # –ù–æ–≤—ã–µ –∏–∫–æ–Ω–∫–∏
public/icons/icon-512x512.svg            # –ù–æ–≤—ã–µ –∏–∫–æ–Ω–∫–∏
app/views/layouts/application.html.erb   # + Service Worker registration
–û–¢–ß–ï–¢_–û_–í–´–ü–û–õ–ù–ï–ù–ù–´–•_–†–ê–ë–û–¢–ê–•.md           # –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ—Ç—á–µ—Ç
```

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≥–µ–º—ã

```
omniauth-vkontakte 1.9.0    # VK OAuth strategy
omniauth-yandex 0.0.2       # Yandex OAuth strategy
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### OAuth –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ VK/Yandex

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
   ```bash
   # .env
   VK_APP_ID=your_vk_app_id
   VK_APP_SECRET=your_vk_app_secret
   YANDEX_CLIENT_ID=your_yandex_client_id
   YANDEX_CLIENT_SECRET=your_yandex_client_secret
   ```

2. **–ü–æ–ª—É—á–∏—Ç–µ credentials:**
   - VK: https://vk.com/editapp?act=create
   - Yandex: https://oauth.yandex.ru/client/new

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```bash
   docker compose restart web
   ```

4. **–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ OAuth:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000/users/sign_in
   - –ù–∞–∂–º–∏—Ç–µ "–í–ö–æ–Ω—Ç–∞–∫—Ç–µ" –∏–ª–∏ "–Ø–Ω–¥–µ–∫—Å"

---

### PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ**
2. **–ù–∞–∂–º–∏—Ç–µ "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"** (Chrome/Edge)
3. **–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞ –¥–æ–º–∞—à–Ω–∏–π —ç–∫—Ä–∞–Ω** (iOS/Android)

PWA –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ñ–ª–∞–π–Ω —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏.

---

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç**
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å:** `/users/profile`
3. **–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:**
   - –¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω (Guest/Auth/Paid)
   - –î–æ—Å—Ç—É–ø–Ω—ã–µ –ª–∏–º–∏—Ç—ã
   - –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–æ–π

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–æ–¥

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§–∞–π–ª—ã | –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ |
|-----------|-------|-------------|
| Models | 9 | ~500 |
| Jobs | 3 | ~150 |
| Services | 4 | ~400 |
| Controllers | 10+ | ~600 |
| Views | 15+ | ~1000 |
| Tests | 5 | ~500 |
| –ö–æ–Ω—Ñ–∏–≥–∏ | 5 | ~200 |
| **–ò—Ç–æ–≥–æ** | **50+** | **~3350** |

### –¢–µ—Å—Ç—ã

| –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å |
|------|--------|
| AvtoradioPlaylistParser | ‚úÖ |
| Detection model | ‚úÖ |
| Detection unique index | ‚úÖ |
| Timezone conversion | ‚úÖ |
| Trial tune_in | ‚úÖ |

---

## ‚è∏ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å (M9)

### –í—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω—Ü–∏—è (Europa Plus)

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
1. –ê–Ω–∞–ª–∏–∑ API –ï–≤—Ä–æ–ø—ã –ü–ª—é—Å (DevTools ‚Üí Network)
2. –°–æ–∑–¥–∞–Ω–∏–µ `EuropaPlusPlaylistParser`
3. –°–æ–∑–¥–∞–Ω–∏–µ `EuropaPlusIngestJob`
4. –¢–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** Medium  
**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏:** 2-4 —á–∞—Å–∞

---

## üéØ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|------------|------------|
| –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | 100% | Docker, DB, Queue |
| –ü–∞—Ä—Å–µ—Ä –ê–≤—Ç–æ—Ä–∞–¥–∏–æ | 100% | –†–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω |
| –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è | 100% | App + DB level |
| UI/UX | 100% | Hotwire + PWA |
| OAuth | 100% | VK + Yandex |
| –ü–æ–¥–ø–∏—Å–∫–∏ | 100% | Profile + limits |
| Recognition | 80% | –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API |
| –í—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω—Ü–∏—è | 0% | –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
| –¢–µ—Å—Ç—ã | 80% | –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** 85%

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Å–ø—Ä–∏–Ω—Ç—É

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: M9 (–í—Ç–æ—Ä–∞—è —Å—Ç–∞–Ω—Ü–∏—è)

- [ ] –ê–Ω–∞–ª–∏–∑ API –ï–≤—Ä–æ–ø—ã –ü–ª—é—Å
- [ ] EuropaPlusPlaylistParser
- [ ] EuropaPlusIngestJob
- [ ] –¢–µ—Å—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã OAuth
- [ ] –¢–µ—Å—Ç—ã PWA
- [ ] System tests –¥–ª—è UI

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Production –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏
- [ ] Backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–í–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è:**  
- GitHub: https://github.com/AnderVer/radiotrack
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `README.md`, `–û–¢–ß–ï–¢_–û_–í–´–ü–û–õ–ù–ï–ù–ù–´–•_–†–ê–ë–û–¢–ê–•.md`

---

<div align="center">

**RadioTrack** ‚Äî M0‚ÄìM7 ‚úÖ | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å 85% üöÄ

[![Rails 8.0](https://img.shields.io/badge/Rails-8.0-blue.svg)](https://rubyonrails.org/)
[![Ruby 3.3.0](https://img.shields.io/badge/Ruby-3.3.0-red.svg)](https://www.ruby-lang.org/)
[![License MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

</div>
