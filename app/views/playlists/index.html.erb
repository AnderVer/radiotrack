<% content_for :title, "–ü–ª–µ–π–ª–∏—Å—Ç—ã ‚Äî RadioTrack" %>

<div class="main">
  <h1 class="mb-3">üéµ –ú–æ–∏ –ø–ª–µ–π–ª–∏—Å—Ç—ã</h1>

  <div class="mb-3">
    <%= link_to "‚ûï –°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç", new_playlist_path, class: "btn btn-primary" %>
  </div>

  <% if @playlists.any? %>
    <p class="text-muted mb-3">
      –ü–ª–µ–π–ª–∏—Å—Ç—ã: <%= @playlists.count %>
      <% if current_user.playlists_limit %>
        (–ª–∏–º–∏—Ç: <%= current_user.playlists_limit %>)
      <% end %>
    </p>

    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 16px;">
      <% @playlists.each do |playlist| %>
        <div style="border: 1px solid #ddd; border-radius: 8px; padding: 16px;">
          <h3 style="margin: 0 0 8px 0;">
            <%= link_to playlist.title, playlist_path(playlist) %>
          </h3>
          <p class="text-muted text-sm mb-2">
            –¢—Ä–µ–∫–æ–≤: <%= playlist.playlist_items.count %>
            <% if playlist.local_id? %>
              <br/>Local ID: <code><%= playlist.local_id %></code>
            <% end %>
          </p>
          <p class="text-sm text-muted">
            –°–æ–∑–¥–∞–Ω: <%= l playlist.created_at, format: :short %>
          </p>
          <div style="display: flex; gap: 8px; margin-top: 12px;">
            <%= link_to "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å", playlist_path(playlist), class: "btn btn-secondary btn-sm" %>
            <%= link_to "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", edit_playlist_path(playlist), class: "btn btn-secondary btn-sm" %>
            <%= button_to "–£–¥–∞–ª–∏—Ç—å", playlist_path(playlist), method: :delete, class: "btn btn-secondary btn-sm", data: { confirm: "–£–¥–∞–ª–∏—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç?" } %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div style="text-align: center; padding: 40px;">
      <p class="text-muted" style="font-size: 18px; margin-bottom: 16px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤</p>
      <p class="text-muted mb-3">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤</p>
      <%= link_to "–°–æ–∑–¥–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç", new_playlist_path, class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<div class="main mt-3">
  <h2 class="mb-3">üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã</h2>
  <ul style="padding-left: 20px; line-height: 1.8;">
    <li>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏—Ö—Å—è —Ç—Ä–µ–∫–æ–≤</li>
    <li>
      <% if current_user.guest? %>
        Guest –ø–ª–∞–Ω: <%= current_user.playlists_limit %> –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, <%= current_user.playlist_items_per_playlist_limit %> —Ç—Ä–µ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º
        <%= link_to "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å", new_user_registration_path %> –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
      <% elsif current_user.auth? %>
        Auth –ø–ª–∞–Ω: <%= current_user.playlists_limit %> –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, <%= current_user.playlist_items_per_playlist_limit %> —Ç—Ä–µ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º
      <% else %>
        Premium –ø–ª–∞–Ω: <%= current_user.playlists_limit %> –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤, <%= current_user.playlist_items_per_playlist_limit %> —Ç—Ä–µ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º
      <% end %>
    </li>
    <li>–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≥–æ—Å—Ç–µ–≤—ã–µ –ø–ª–µ–π–ª–∏—Å—Ç—ã –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</li>
    <li>–î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç—Ä–µ–∫–∏ –∏–∑ —ç—Ñ–∏—Ä–∞ —á–µ—Ä–µ–∑ "Capture now playing"</li>
  </ul>
</div>
